(()=>{var e={};e.id=707,e.ids=[707],e.modules={11185:e=>{"use strict";e.exports=require("mongoose")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},6005:e=>{"use strict";e.exports=require("node:crypto")},87561:e=>{"use strict";e.exports=require("node:fs")},49411:e=>{"use strict";e.exports=require("node:path")},71017:e=>{"use strict";e.exports=require("path")},63477:e=>{"use strict";e.exports=require("querystring")},12781:e=>{"use strict";e.exports=require("stream")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},63618:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>o.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>l});var s=a(90570),r=a(68179),i=a(52696),o=a.n(i),n=a(5666),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);a.d(t,d);let l=["",{children:["(root)",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,82309)),"D:\\visual studio code\\project\\learn React and Nextjs\\imaginify\\app\\(root)\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,30770)),"D:\\visual studio code\\project\\learn React and Nextjs\\imaginify\\app\\(root)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,94084,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,51677))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,81292)),"D:\\visual studio code\\project\\learn React and Nextjs\\imaginify\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,94084,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,51677))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["D:\\visual studio code\\project\\learn React and Nextjs\\imaginify\\app\\(root)\\page.tsx"],m="/(root)/page",u={require:a,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(root)/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},24071:(e,t,a)=>{let s={"0e337730f08db15233ccdf85fca8a91f7c727e39":()=>Promise.resolve().then(a.bind(a,84195)).then(e=>e.syncKeylessConfigAction),"55de01d7dcc8b9efeb7c350f664e86664eea24d7":()=>Promise.resolve().then(a.bind(a,84195)).then(e=>e.deleteKeylessAction),f82c53323200eba1d8cabd668014c33f05ccac10:()=>Promise.resolve().then(a.bind(a,84195)).then(e=>e.createOrReadKeylessAction),"51ee5b3c432bda2517692ab88bb54e3fca12ee4c":()=>Promise.resolve().then(a.bind(a,7329)).then(e=>e.getUserImages),"7a9f1c74bb35fe3340284e9fafea878d42b8dc54":()=>Promise.resolve().then(a.bind(a,7329)).then(e=>e.getAllImages),"902051a992baae2f5785ca7add274ba34cc7becb":()=>Promise.resolve().then(a.bind(a,7329)).then(e=>e.updateImage),"934028fdc0be84685f832b78fc10dba1d10216a3":()=>Promise.resolve().then(a.bind(a,7329)).then(e=>e.addImage),dfd21a0dec0629a0528d8f07f8196a742310df7c:()=>Promise.resolve().then(a.bind(a,7329)).then(e=>e.getImageById),e22676a53c5de1d297ab088741d73b9758d0ed3b:()=>Promise.resolve().then(a.bind(a,7329)).then(e=>e.deleteImage)};async function r(e,...t){return(await s[e]()).apply(null,t)}e.exports={"0e337730f08db15233ccdf85fca8a91f7c727e39":r.bind(null,"0e337730f08db15233ccdf85fca8a91f7c727e39"),"55de01d7dcc8b9efeb7c350f664e86664eea24d7":r.bind(null,"55de01d7dcc8b9efeb7c350f664e86664eea24d7"),f82c53323200eba1d8cabd668014c33f05ccac10:r.bind(null,"f82c53323200eba1d8cabd668014c33f05ccac10"),"51ee5b3c432bda2517692ab88bb54e3fca12ee4c":r.bind(null,"51ee5b3c432bda2517692ab88bb54e3fca12ee4c"),"7a9f1c74bb35fe3340284e9fafea878d42b8dc54":r.bind(null,"7a9f1c74bb35fe3340284e9fafea878d42b8dc54"),"902051a992baae2f5785ca7add274ba34cc7becb":r.bind(null,"902051a992baae2f5785ca7add274ba34cc7becb"),"934028fdc0be84685f832b78fc10dba1d10216a3":r.bind(null,"934028fdc0be84685f832b78fc10dba1d10216a3"),dfd21a0dec0629a0528d8f07f8196a742310df7c:r.bind(null,"dfd21a0dec0629a0528d8f07f8196a742310df7c"),e22676a53c5de1d297ab088741d73b9758d0ed3b:r.bind(null,"e22676a53c5de1d297ab088741d73b9758d0ed3b")}},56469:(e,t,a)=>{let s={d9d0562c8baa631417ca06c17e3e81bbbbbaf18e:()=>Promise.resolve().then(a.bind(a,72891)).then(e=>e.invalidateCacheAction)};async function r(e,...t){return(await s[e]()).apply(null,t)}e.exports={d9d0562c8baa631417ca06c17e3e81bbbbbaf18e:r.bind(null,"d9d0562c8baa631417ca06c17e3e81bbbbbaf18e")}},50792:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,6744,23)),Promise.resolve().then(a.t.bind(a,64970,23)),Promise.resolve().then(a.bind(a,74892))},82309:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m,metadata:()=>c});var s=a(50798),r=a(3222),i=a(7329),o=a(47714),n=a(77950),d=a(43289),l=a(98221);let c={title:"Remove Shadow | AI Image Transformation Tool",description:"Transform your images with AI-powered technology. Remove shadows, backgrounds, and unwanted objects to create professional-quality photos in seconds.",openGraph:{title:"Remove Shadow - AI Image Transformation Made Easy",description:"Transform your images with AI-powered technology. Remove shadows, backgrounds, and unwanted objects to create professional-quality photos in seconds.",type:"website",locale:"en_US",url:"https://removeshadow.com",siteName:"Remove Shadow"},twitter:{card:"summary_large_image",title:"Remove Shadow - AI Image Transformation Made Easy",description:"Transform your images with AI-powered technology. Remove shadows, backgrounds, and unwanted objects to create professional-quality photos in seconds."},alternates:{canonical:"https://removeshadow.com"},robots:{index:!0,follow:!0}},m=async({searchParams:e})=>{let t=Number(e?.page)||1,a=e?.query||"";return await (0,i.getAllImages)({page:t,searchQuery:a}),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("section",{className:"relative bg-gradient-to-b from-purple-600 via-purple-500 to-purple-400 overflow-hidden",children:[(0,s.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[s.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-purple-500 opacity-20 rounded-full blur-3xl"}),s.jsx("div",{className:"absolute top-60 -left-20 w-60 h-60 bg-indigo-500 opacity-20 rounded-full blur-3xl"}),s.jsx("div",{className:"absolute bottom-0 right-1/4 w-40 h-40 bg-pink-500 opacity-20 rounded-full blur-3xl"})]}),(0,s.jsxs)("div",{className:"container mx-auto px-4 py-20 relative z-10",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center text-center mb-16",children:[(0,s.jsxs)("div",{className:"inline-flex items-center px-4 py-2 bg-white/10 backdrop-blur-sm rounded-full mb-6",children:[s.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full mr-2"}),s.jsx("span",{className:"text-white text-sm font-medium",children:"AI-Powered Image Editing"})]}),(0,s.jsxs)("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-white mb-6 max-w-4xl leading-tight",children:["Transform Your Images with ",s.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-purple-300 to-pink-300",children:"AI Magic"})]}),s.jsx("p",{className:"text-lg md:text-xl text-white/80 max-w-3xl mb-10",children:"Our advanced AI technology automatically enhances your photos by removing shadows, backgrounds, and unwanted objects - creating professional-quality images in seconds."}),(0,s.jsxs)("div",{className:"flex flex-wrap justify-center gap-4 mb-12",children:[s.jsx(d.z,{asChild:!0,size:"lg",className:"bg-white text-purple-700 hover:bg-white/90 transition-all shadow-lg",children:s.jsx(n.default,{href:"/transformations/add/remove-shadow-from-photo",children:(0,s.jsxs)("span",{className:"flex items-center gap-2",children:["Try for Free ",s.jsx(o.default,{src:"/assets/icons/arrow.svg",width:16,height:16,alt:"Arrow"})]})})}),s.jsx(d.z,{asChild:!0,size:"lg",variant:"outline",className:"border-white/30 text-black hover:bg-white/90 transition-all",children:s.jsx(n.default,{href:"/pricing",children:"View Pricing"})})]})]}),(0,s.jsxs)("div",{className:"mt-20",children:[s.jsx("p",{className:"text-white text-center mb-8 text-sm uppercase tracking-wider font-medium",children:"Trusted by creators worldwide"}),s.jsx("div",{className:"flex justify-center flex-wrap gap-10 md:gap-16",children:r.FV.slice(1,6).map(e=>(0,s.jsxs)(n.default,{href:e.route,className:"flex flex-col items-center gap-3 group",children:[s.jsx("div",{className:"flex items-center justify-center w-20 h-20 rounded-full bg-white/30 backdrop-blur-xl border-2 border-white/40 shadow-xl transition-all duration-300  group-hover:bg-white/60 group-hover:scale-110 group-hover:border-white/70  group-hover:shadow-white/20 group-hover:shadow-lg",children:s.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-gradient-to-br from-white to-white/80 rounded-full",children:s.jsx(o.default,{src:e.icon,alt:e.label,width:24,height:24,className:"transition-all group-hover:scale-110"})})}),s.jsx("p",{className:"text-sm font-semibold text-center text-white group-hover:text-white transition-colors",children:e.label})]},e.route))})]})]})]}),s.jsx("section",{className:"py-20 bg-gray-50",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4",children:[s.jsx("h2",{className:"h2-bold text-center mb-4",children:"See the Difference"}),s.jsx("p",{className:"text-center max-w-3xl mx-auto mb-8",children:"Explore our powerful image transformation tools"}),(0,s.jsxs)("div",{className:"max-w-4xl mx-auto mb-16 bg-white rounded-xl overflow-hidden shadow-lg",children:[(0,s.jsxs)("div",{className:"p-8 pb-4",children:[s.jsx("h3",{className:"p-24-semibold text-center mb-4 text-purple-700",children:"Shadow Remove"}),s.jsx("p",{className:"text-center max-w-2xl mx-auto mb-6 text-gray-600",children:"Our flagship technology automatically detects and removes unwanted shadows from your photos, creating clean, professional images instantly."})]}),s.jsx("div",{className:"p-4",children:s.jsx(l.vx,{itemOne:s.jsx(l.ps,{src:"/assets/images/before.png",alt:"Before Shadow Removal"}),itemTwo:s.jsx(l.ps,{src:"/assets/images/after.png",alt:"After Shadow Removal"}),position:50,style:{height:"450px",borderRadius:"0.5rem"},className:"shadow-inner"})}),s.jsx("div",{className:"p-6 text-center",children:s.jsx(d.z,{asChild:!0,size:"lg",className:"bg-purple-gradient text-white",children:s.jsx(n.default,{href:"/transformations/add/remove-shadow-from-photo",children:"Try Shadow Remove"})})})]}),(0,s.jsxs)("div",{className:"space-y-16 mt-20",children:[s.jsx("div",{className:"max-w-5xl mx-auto",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 items-center",children:[(0,s.jsxs)("div",{className:"order-2 md:order-1",children:[s.jsx("h3",{className:"p-24-semibold mb-4 text-purple-700",children:"Background Remove"}),s.jsx("p",{className:"p-16-regular mb-6 text-gray-600",children:"Instantly remove backgrounds from your images with perfect edge detection. Create professional product photos with clean, transparent backgrounds for e-commerce, marketing materials, or design projects."}),s.jsx(d.z,{asChild:!0,size:"lg",className:"bg-purple-gradient text-white",children:s.jsx(n.default,{href:"/transformations/add/removeBackground",children:"Try Background Remove"})})]}),s.jsx("div",{className:"bg-white p-4 rounded-xl shadow-md order-1 md:order-2",children:s.jsx(l.vx,{itemOne:s.jsx(l.ps,{src:"/assets/images/bg-before1.png",alt:"Before Background Removal"}),itemTwo:s.jsx(l.ps,{src:"/assets/images/bg-after2.png",alt:"After Background Removal"}),position:50,style:{height:"350px",borderRadius:"0.5rem"},className:"shadow-inner"})})]})}),s.jsx("div",{className:"max-w-md mx-auto border-t border-gray-200"}),s.jsx("div",{className:"max-w-5xl mx-auto",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 items-center",children:[s.jsx("div",{className:"bg-white p-4 rounded-xl shadow-md",children:s.jsx(l.vx,{itemOne:s.jsx(l.ps,{src:"/assets/images/remove-before.png",alt:"Before Object Removal"}),itemTwo:s.jsx(l.ps,{src:"/assets/images/remove-after.png",alt:"After Object Removal"}),position:50,style:{height:"350px",borderRadius:"0.5rem"},className:"shadow-inner"})}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"p-24-semibold mb-4 text-purple-700",children:"Object Remove"}),s.jsx("p",{className:"p-16-regular mb-6 text-gray-600",children:"Remove unwanted objects, people, or distractions from your photos with precision. Our AI intelligently fills the space, maintaining the natural look of your image without any trace of the removed elements."}),s.jsx(d.z,{asChild:!0,size:"lg",className:"bg-purple-gradient text-white",children:s.jsx(n.default,{href:"/transformations/add/remove",children:"Try Object Remove"})})]})]})}),s.jsx("div",{className:"max-w-md mx-auto border-t border-gray-200"}),s.jsx("div",{className:"max-w-md mx-auto border-t border-gray-200"}),s.jsx("div",{className:"max-w-5xl mx-auto",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 items-center",children:[(0,s.jsxs)("div",{className:"order-2 md:order-1",children:[s.jsx("h3",{className:"p-24-semibold mb-4 text-purple-700",children:"Object Recolor"}),s.jsx("p",{className:"p-16-regular mb-6 text-gray-600",children:"Identify and recolor specific objects in your images with precision. Change colors without affecting the rest of your image for perfect product variants and creative design options."}),s.jsx(d.z,{asChild:!0,size:"lg",className:"bg-purple-gradient text-white",children:s.jsx(n.default,{href:"/transformations/add/recolor",children:"Try Object Recolor"})})]}),s.jsx("div",{className:"bg-white p-4 rounded-xl shadow-md order-1 md:order-2",children:s.jsx(l.vx,{itemOne:s.jsx(l.ps,{src:"/assets/images/recolor-before.png",alt:"Before Object Recolor"}),itemTwo:s.jsx(l.ps,{src:"/assets/images/recolor-after.png",alt:"After Object Recolor"}),position:50,style:{height:"350px",borderRadius:"0.5rem"},className:"shadow-inner"})})]})})]})]})}),s.jsx("section",{className:"py-20 bg-gray-50",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto px-4",children:[s.jsx("h2",{className:"h2-bold text-center mb-12",children:"Frequently Asked Questions"}),s.jsx("div",{className:"space-y-4",children:[{question:"How does the shadow removal technology work?",answer:"Our AI technology uses advanced machine learning algorithms to detect shadows in your images and intelligently remove them while preserving the natural look of your photos. The system analyzes light patterns, colors, and textures to identify shadow areas, then applies precise adjustments to restore details hidden by shadows."},{question:"Can I use the processed images for commercial purposes?",answer:"Yes! All images processed with our platform are yours to use for any purpose, including commercial use. You own full copyright to all output images with no attribution or additional fees required."},{question:"What file formats are supported?",answer:"We support all major image formats including JPG, PNG, WEBP, and HEIC. The maximum file size is 10MB per image. For larger files, we recommend compressing them before uploading or contacting our customer support team for assistance."},{question:"How long does it take to process an image?",answer:"Most images are processed within seconds. Processing time depends on the size and complexity of the image, as well as current system load. Premium users enjoy priority processing and typically get faster results."},{question:"What makes RemoveShadow different from other image editing tools?",answer:"RemoveShadow combines state-of-the-art AI models with an intuitive interface, making professional-grade image editing accessible to everyone. Our technology offers superior accuracy in detecting and processing complex image elements, with results that look natural and professional every time."},{question:"Do I need to install any software to use RemoveShadow?",answer:"No installation required! Imaginify is a fully web-based platform that works in your browser. You can access all features from any device with an internet connection, including desktops, laptops, tablets, and smartphones."},{question:"Is my data secure when I upload images to RemoveShadow?",answer:"Absolutely. We take data security seriously. All uploaded images are processed through secure, encrypted connections. We don't share your images with third parties, and you can delete your data from our servers at any time. For more details, please review our privacy policy."}].map((e,t)=>s.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:(0,s.jsxs)("details",{className:"group",children:[(0,s.jsxs)("summary",{className:"p-6 flex justify-between items-center cursor-pointer",children:[s.jsx("h3",{className:"p-20-semibold text-gray-800",children:e.question}),s.jsx("span",{className:"ml-6 flex-shrink-0 text-purple-600 group-open:rotate-180 transition-transform duration-300",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("polyline",{points:"6 9 12 15 18 9"})})})]}),s.jsx("div",{className:"px-6 pb-6 pt-0 text-gray-600 border-t border-gray-100",children:s.jsx("p",{className:"p-16-regular",children:e.answer})})]})},t))})]})}),(0,s.jsxs)("section",{className:"relative py-24 overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-purple-600 via-purple-500 to-purple-400"}),(0,s.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 left-1/4 w-64 h-64 bg-purple-500 opacity-20 rounded-full blur-3xl"}),s.jsx("div",{className:"absolute bottom-0 right-1/4 w-80 h-80 bg-indigo-500 opacity-20 rounded-full blur-3xl"}),s.jsx("div",{className:"absolute -bottom-20 -left-20 w-60 h-60 bg-pink-500 opacity-10 rounded-full blur-3xl"})]}),s.jsx("div",{className:"absolute inset-0 bg-grid-white/[0.05] bg-[length:40px_40px]"}),(0,s.jsxs)("div",{className:"max-w-4xl mx-auto px-4 text-center relative z-10",children:[(0,s.jsxs)("div",{className:"inline-flex items-center px-4 py-2 bg-white/10 backdrop-blur-sm rounded-full mb-6",children:[s.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full mr-2"}),s.jsx("span",{className:"text-white text-sm font-medium",children:"Start Your Journey Today"})]}),s.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-6 text-white",children:"Ready to Transform Your Images?"}),s.jsx("p",{className:"text-lg mb-10 max-w-2xl mx-auto text-white",children:"Join thousands of photographers, designers, and e-commerce businesses who trust our AI technology for perfect images."}),(0,s.jsxs)("div",{className:"flex flex-wrap justify-center gap-4",children:[s.jsx(d.z,{asChild:!0,size:"lg",className:"bg-white text-purple-700 hover:bg-white/90 transition-all shadow-lg",children:s.jsx(n.default,{href:"/transformations/new",children:(0,s.jsxs)("span",{className:"flex items-center gap-2",children:["Get Started for Free ",s.jsx(o.default,{src:"/assets/icons/arrow.svg",width:16,height:16,alt:"Arrow"})]})})}),s.jsx(d.z,{asChild:!0,size:"lg",variant:"outline",className:"border-white/30 text-black hover:bg-white/10 transition-all",children:s.jsx(n.default,{href:"/pricing",children:"View Pricing"})})]})]})]})]})}},43289:(e,t,a)=>{"use strict";a.d(t,{z:()=>l});var s=a(50798),r=a(77751),i=a(2410),o=a(51496),n=a(88437);let d=(0,o.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=r.forwardRef(({className:e,variant:t,size:a,asChild:r=!1,...o},l)=>{let c=r?i.g7:"button";return s.jsx(c,{className:(0,n.cn)(d({variant:t,size:a,className:e})),ref:l,...o})});l.displayName="Button"},7329:(e,t,a)=>{"use strict";a.r(t),a.d(t,{addImage:()=>g,deleteImage:()=>b,getAllImages:()=>w,getImageById:()=>x,getUserImages:()=>y,updateImage:()=>f});var s=a(88775);a(68775);var r=a(50060),i=a(63647),o=a(88437),n=a(21403),d=a(11185);let l=new d.Schema({title:{type:String,required:!0},transformationType:{type:String,required:!0},publicId:{type:String,required:!0},secureURL:{type:String,required:!0},width:{type:Number},height:{type:Number},config:{type:Object},transformationUrl:{type:String},aspectRatio:{type:String},color:{type:String},prompt:{type:String},author:{type:d.Schema.Types.ObjectId,ref:"User"},createdAt:{type:Date,default:Date.now},updatedAt:{type:Date,default:Date.now}}),c=d.models?.Image||(0,d.model)("Image",l);var m=a(51013),u=a(74277),p=a(69303);let h=e=>e.populate({path:"author",model:n.Z,select:"_id firstName lastName clerkId"});async function g({image:e,userId:t,path:a}){try{await (0,i.v)();let s=await n.Z.findById(t);if(!s)throw Error("User not found");let o=await c.create({...e,author:s._id});return(0,r.revalidatePath)(a),JSON.parse(JSON.stringify(o))}catch(e){(0,o.S3)(e)}}async function f({image:e,userId:t,path:a}){try{await (0,i.v)();let s=await c.findById(e._id);if(!s||s.author.toHexString()!==t)throw Error("Unauthorized or image not found");let o=await c.findByIdAndUpdate(s._id,e,{new:!0});return(0,r.revalidatePath)(a),JSON.parse(JSON.stringify(o))}catch(e){(0,o.S3)(e)}}async function b(e){try{await (0,i.v)(),await c.findByIdAndDelete(e)}catch(e){(0,o.S3)(e)}finally{(0,m.redirect)("/")}}async function x(e){try{await (0,i.v)();let t=await h(c.findById(e));if(!t)throw Error("Image not found");return JSON.parse(JSON.stringify(t))}catch(e){(0,o.S3)(e)}}async function w({limit:e=9,page:t=1,searchQuery:a=""}){try{await (0,i.v)(),u.v2.config({cloud_name:"dpokgg5g5",api_key:process.env.CLOUDINARY_API_KEY,api_secret:process.env.CLOUDINARY_API_SECRET,secure:!0});let s="folder=imaginify";a&&(s+=` AND ${a}`);let{resources:r}=await u.v2.search.expression(s).execute(),o=r.map(e=>e.public_id),n={};a&&(n={publicId:{$in:o}});let d=(Number(t)-1)*e,l=await h(c.find(n)).sort({updatedAt:-1}).skip(d).limit(e),m=await c.find(n).countDocuments(),p=await c.find().countDocuments();return{data:JSON.parse(JSON.stringify(l)),totalPage:Math.ceil(m/e),savedImages:p}}catch(e){(0,o.S3)(e)}}async function y({limit:e=9,page:t=1,userId:a}){try{await (0,i.v)();let s=(Number(t)-1)*e,r=await h(c.find({author:a})).sort({updatedAt:-1}).skip(s).limit(e),o=await c.find({author:a}).countDocuments();return{data:JSON.parse(JSON.stringify(r)),totalPages:Math.ceil(o/e)}}catch(e){(0,o.S3)(e)}}(0,p.h)([g,f,b,x,w,y]),(0,s.U)("934028fdc0be84685f832b78fc10dba1d10216a3",g),(0,s.U)("902051a992baae2f5785ca7add274ba34cc7becb",f),(0,s.U)("e22676a53c5de1d297ab088741d73b9758d0ed3b",b),(0,s.U)("dfd21a0dec0629a0528d8f07f8196a742310df7c",x),(0,s.U)("7a9f1c74bb35fe3340284e9fafea878d42b8dc54",w),(0,s.U)("51ee5b3c432bda2517692ab88bb54e3fca12ee4c",y)},21403:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var s=a(11185);let r=new s.Schema({clerkId:{type:String,required:!0,unique:!0},email:{type:String,required:!0,unique:!0},username:{type:String,required:!0,unique:!0},photo:{type:String,required:!0},firstName:{type:String},lastName:{type:String},planId:{type:Number,default:1},creditBalance:{type:Number,default:5}}),i=s.models?.User||(0,s.model)("User",r)},63647:(e,t,a)=>{"use strict";a.d(t,{v:()=>n});var s=a(11185),r=a.n(s);let i=process.env.MONGODB_URL,o=global.mongoose;o||(o=global.mongoose={conn:null,promise:null});let n=async()=>{if(o.conn)return o.conn;if(!i)throw Error("Missing MONGODB_URL");return o.promise=o.promise||r().connect(i,{dbName:"cluster0",bufferCommands:!1}),o.conn=await o.promise,o.conn}}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[867,263,492,611,543,386,60,714,277,238,685],()=>a(63618));module.exports=s})();